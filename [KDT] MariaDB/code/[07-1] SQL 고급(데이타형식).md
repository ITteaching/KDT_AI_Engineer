# [실습 1 : 5 ~ 10p]

## 7.1 DATA TYPE / 형 변환

### 7.1.1 변수의 사용

* 변수 선언 및 출력

```SQL
-- 선언 : SET @변수이름 = 변수의 값;
-- 출력 : SELECT @변수이름;

-- 변수 선언 후 덧셈 수행
SET @a = 10;
SET @b = 20;
SELECT @a + @b;

-- 테이블과 함께 조회
SET @a = '이름';
SELECT @a;
SELECT @a, name
  FROM userTBL;  
```

* 변수 활용 예 : LIMIT를 활용 조회 건수 제한

```SQL
SET @v_limit = 5;
PREPARE my_sql
	FROM 'SELECT name, height FROM userTBL ORDER BY height LIMIT ?';
EXECUTE my_sql USING @v_limit;	
```



### 7.1.2 DATA 형 변환

* 함수를 이용한 형변환

```SQL
-- CAST( expression AS 데이터형식[ (길이) ] )
-- CONVERT( expression, 데이터형식 [ (길이) ] )

-- 평균 구매 갯수(실수)를 integer로 변환 : 반올림
SELECT AVG(amount) FROM buyTBL;
SELECT CAST(AVG(amount) AS INTEGER) FROM buyTBL;
SELECT CONVERT(AVG(amount), INTEGER) FROM buyTBL;

-- 날짜 형태로 변환 ('20221225')
SELECT CAST('20221225' AS DATE);

-- 숫자를 문자로 변환
-- buyTBL의 단가(price), 수량(amount)을 문자 데이터 형식으로 바꿔서 출력
SELECT CONCAT(CAST(price AS char(10)),'*', CAST(amount AS char(10))),
         price * amount
 FROM buyTBL;
 
-- 참고만
WITH abc(a,b)
AS
 (SELECT CONCAT(CAST(price AS CHAR(10)), '*', CAST(amount AS CHAR(10)), '=') AS A, 
            price*amount AS B
  FROM buytbl)
SELECT CONCAT(a,b) FROM abc;
```

* 암시적인 형 변환 : 자동형 변환

```SQL
SELECT '100' + '200';           --  300 : + 연산자
SELECT CONCAT('100', '200');    -- '100200' : CONCAT
SELECT CONCAT(100, '200');      -- '100200' : CONCAT
SELECT 1 > '2mega';             -- 0 : '2mega' -> 2로 변환
SELECT 3 > '2MEGA';             -- 1 : '2MEGA' -> 2로 변환
SELECT 0 = 'mega2';             -- 1 : 'mega2' -> 0로 변환
```
